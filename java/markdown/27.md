+ [author](https://github.com/3293172751)
+ <a href="https://github.com/3293172751" target="_blank"><img src="https://img.shields.io/badge/Github-xiongxinwei-inactive?style=social&logo=github"></a></p>

# 第27节 Druid连接池和案例

+ [回到目录](../README.md)
+ [回到项目首页](../../README.md)
+ [上一节](26.md)
> ❤️💕💕java的学习指南,从入门到大师篇章。Myblog:[http://nsddd.top](http://nsddd.top/)
---
[TOC]

## 数据库连接池

我们在讲多线程的时候说过，创建线程是一个昂贵的操作，如果有大量的小任务需要执行，并且频繁地创建和销毁线程，实际上会消耗大量的系统资源，往往创建和消耗线程所耗费的时间比执行任务的时间还长，所以，为了提高效率，可以用线程池。

类似的，在执行JDBC的增删改查的操作时，如果每一次操作都来一次打开连接，操作，关闭连接，那么创建和销毁JDBC连接的开销就太大了。为了避免频繁地创建和销毁JDBC连接，我们可以通过连接池（Connection Pool）复用已经创建好的连接。

JDBC连接池有一个标准的接口`javax.sql.DataSource`，注意这个类位于Java标准库中，但仅仅是接口。要使用JDBC连接池，我们必须选择一个JDBC连接池的实现。常用的JDBC连接池有：

- HikariCP
- C3P0
- BoneCP
- Druid



## Druid

+ druid连接池是阿里巴巴开源的数据库连接池项目
+ 功能强大，性能优秀，是Java语言最好的数据库连接池之一

目前使用最广泛的是Druid。我们以Druid为例，要使用JDBC连接池，先添加Druid的依赖如下：

```xml
<dependency>
    <groupId>com.zaxxer</groupId>
    <artifactId>HikariCP</artifactId>
    <version>2.7.1</version>
</dependency>
```



## 案例

> **完成商品品牌数据的增删改查操作**

### 创建数据表 tb_brand

+ 当前的数据库：`db3`

```sql
-- 删除tb_brand表
drop table if exists tb_brand;
 
-- 创建tb_brand表
create table tb_brand (
    -- id 主键
    id int primary key auto_increment,
    -- 品牌名称
    brand_name varchar(20),
    -- 企业名称
    company_name varchar(20),
    -- 排序字段
    ordered int,
    -- 描述信息
    description varchar(100),
    -- 状态：0：禁用  1：启用
    status int
);
-- 添加数据
insert into tb_brand (brand_name, company_name, ordered, description, status) values ('三只松鼠', '三只松鼠股份有限公司', 5, '好吃不上火', 0), ('华为', '华为技术有限公司', 100, '华为致力于把数字世界带入每个人、每个家庭、每个组织，构建万物互联的智能世界', 1),('小米', '小米科技有限公司', 50, 'are you ok', 1);
 
SELECT * FROM tb_brand;
 
```

1	xiaomi	xiaomigongsi	50	are you ok	1
2	huawei	xiaomigongsi	50	are you ok	1
3	huawei	xiaomigongsi	50	are you ok	1
4	huawei	huawei yyds	50	are you ok	1
5	rongyao	huawei yyds	50	are you ok	1
6	yamaxun	huawei yyds	50	are you ok	1
7	google	huawei yyds	50	are you ok	1



### 实体类 Brand

**因为基本数据类型都是有默认值，可能会给我们带来干扰，所以建议在实体类中都建议使用包装类型**

```java
package top.nsddd.top;
/*
品牌
* */
public class Brand {
    //建议Integer，因为int基本数据类型，默认为0
//    批量生成所有的数据
    // id 主键
   private Integer id;
    // 品牌名称
   private String brand_name;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getBrand_name() {
        return brand_name;
    }

    public void setBrand_name(String brand_name) {
        this.brand_name = brand_name;
    }

    public String getCompany_name() {
        return company_name;
    }

    public void setCompany_name(String company_name) {
        this.company_name = company_name;
    }

    public Integer getOrdered() {
        return ordered;
    }

    public void setOrdered(Integer ordered) {
        this.ordered = ordered;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public Integer getStatus() {
        return status;
    }

    public void setStatus(Integer status) {
        this.status = status;
    }

    // 企业名称
   private String company_name;
    // 排序字段
   private Integer ordered ;
    // 描述信息
   private String description;
    // 状态：0：禁用  1：启用
   private Integer status;


    @Override
    public String toString() {
        return "Brand{" +
                "id=" + id +
                ", brand_name='" + brand_name + '\'' +
                ", company_name='" + company_name + '\'' +
                ", ordered=" + ordered +
                ", description='" + description + '\'' +
                ", status=" + status +
                '}';
    }

}
```







### 测试用例



## END 链接
+ [回到目录](../README.md)
+ [上一节](26.md)
+ [下一节](28.md)
---
+ [参与贡献❤️💕💕](https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md)