+ [author](https://github.com/3293172751)
# 第3节 Sql基本语法
+ [回到目录](../README.md)
+ [回到项目首页](../../README.md)
+ [上一节](2.md)
> ❤️💕💕数据库的高级指南，如何在 MySQL、SQL Server、MS Access、Oracle、Sybase、Informix、Postgres 和其他数据库系统中使用 SQL，如何从头实现一个数据库系统，我们开始吧！Myblog:[http://nsddd.top](http://nsddd.top/)
---


[TOC]

## 前言

+ [x] [MYSQL上机数据查询实现](../MYSQL上机数据查询实现.docx)
+ [x] [MySQL常用操作](../MySQL常用操作.doc)

## sql简介

我们通过SQL对数据库进行**增删改查**

### 什么是 SQL？

1. SQL 代表结构化查询语言
2. SQL 允许您访问和操作数据库
3. SQL 于 1986 年成为美国国家标准协会 (ANSI) 的标准，并于 1987 年成为国际标准化组织 (ISO) 的标准

### SQL能做什么？

1. SQL 可以对数据库执行查询
2. SQL 可以从数据库中检索数据
3. SQL可以在数据库中插入记录
4. SQL 可以更新数据库中的记录
5. SQL 可以从数据库中删除记录
6. SQL 可以创建新的数据库
7. SQL 可以在数据库中创建新表
8. SQL可以在数据库中创建存储过程
9. SQL 可以在数据库中创建视图
10. SQL 可以设置表、过程和视图的权限

> 尽管 SQL 是 ANSI/ISO 标准，但 SQL 语言有不同的版本。
>
> 但是，为了符合 ANSI 标准，它们都以类似的方式至少支持主要命令（例如` SELECT`, `UPDATE`, `DELETE`, `INSERT`, ` WHERE`)

### 一些最重要的 SQL 命令

1. `SELECT`- 从数据库中提取数据
2. `UPDATE`- 更新数据库中的数据
3. `DELETE`- 从数据库中删除数据
4. `INSERT INTO`- 将新数据插入数据库
5. `CREATE DATABASE`- 创建一个新的数据库
6. `ALTER DATABASE`- 修改数据库
7. `CREATE TABLE`- 创建一个新表
8. `ALTER TABLE`- 修改表
9. `DROP TABLE`- 删除一个表
10. `CREATE INDEX`- 创建索引（搜索键）
11. `DROP INDEX`- 删除索引

## 快速上手

+ 查看客户表

  ```sql
  SELECT * FROM Customers;
  ```

+ 选择`select`

  ```sql
  SELECT column1, column2, ... FROM table_name;
  select * from table_name; #选择所有
  ```

+ 过滤`WHERE`

  ```sql
  SELECT column1, column2, ...
  FROM table_name
  WHERE condition;
  
  SELECT * FROM Customers
  WHERE Country='Mexico'; #选择所有国家为墨西哥的
  ```

  > **注意：**子句`WHERE`不仅用在` SELECT`语句中，也用在`UPDATE`, `DELETE`等！

+ AND、OR 和 NOT 运算符

  ```sql
  # and  -- 与 表示都满足
  SELECT column1, column2, ...
  FROM table_name
  WHERE condition1 AND condition2 AND condition3 ...;
  
  # or -- 或  表示满足其中一个
  SELECT column1, column2, ...
  FROM table_name
  WHERE condition1 OR condition2 OR condition3 ...;
  
  # NOT -- 非  表示如果条件不为真，操作员将显示一条记录
  SELECT column1, column2, ...
  FROM table_name
  WHERE NOT condition;
  
  # “非”案例  -- 从“客户表”中选择“国家”不是“德国”的所有字段
  SELECT * FROM Customers
  WHERE NOT Country='Germany';
  
  # 案例 --  从“客户表”中选出所有国家/地区为“德国”且城市必须为“柏林”或“慕尼黑”的字段（使用括号构成复杂表达式
  SELECT * FROM Customers
  WHERE Country='Germany' AND (City='Berlin' OR City='München');
  ```

+ 排序`ORDER BY `

  ```sql
  SELECT column1, column2, ...
  FROM table_name
  ORDER BY column1, column2, ... ASC|DESC;
  ```

  > 默认情况下，`ORDER BY`关键字按升序对记录进行排序。要按降序对记录进行排序，请使用` DESC`关键字。

+ 插入数据`INSERT INTO`

  + 第一种编写格式 – key value 一一对应

  ```sql
  INSERT INTO table_name (column1, column2, column3, ...)
  VALUES (value1, value2, value3, ...);
  ```

  + 第二种编写格式 — 请确保值的顺序与表中列的顺序相同。

  ```sql
  INSERT INTO table_name
  VALUES (value1, value2, value3, ...);
  ```

  + 插入案例

    ```sql
    # 在“客户”表中插入一条新记录
    INSERT INTO Customers (CustomerName, ContactName, Address, City, PostalCode, Country)
    VALUES ('Cardinal', 'Tom B. Erichsen', 'Skagen 21', 'Stavanger', '4006', 'Norway');
    ```

+ NULL值

  具有 NULL 值的字段是没有值的字段。

  如果表中的字段是可选的，则可以插入新记录或更新记录而不向该字段添加值。然后，该字段将保存为 NULL 值。

  > **注意：** NULL 值不同于零值或包含空格的字段。具有 NULL 值的字段是在记录创建期间留空的字段！

+ 测试NUll值

  ```sql
  # IS NULL 语法  -- 具有NULL的所用名称
  SELECT column_names
  FROM table_name
  WHERE column_name IS NULL;
  
  # IS NOT NULL 语法   -- 不具有NULL的所用名称
  SELECT column_names
  FROM table_name
  WHERE column_name IS NOT NULL;
  ```

+ 更新`update`

  ```sql
  # 该UPDATE语句用于修改表中的现有记录
  UPDATE table_name
  SET column1 = value1, column2 = value2, ...
  WHERE condition;
  ```

  > **注意：**更新表中的记录时要小心！注意` WHERE`语句中的子句`UPDATE`。该`WHERE`子句指定应该更新哪些记录。如果省略该`WHERE`子句，则表中的所有记录都将被更新！

+ 删除表中的现有数据

  ```sql
  DELETE FROM table_name WHERE condition;
  
  # 删除所用行 -- 注意：表没有被删除
  delete from table_name 
  
  #从“客户”表中删除客户名字是：“Alfreds Futterkiste”：
  DELETE FROM Customers WHERE CustomerName='Alfreds Futterkiste';
  ```



## SQL高级部分

+ `MIN()` 和 `MAX()` 函数

  ```sql
  # MIN（）
  SELECT MIN(column_name)
  FROM table_name
  WHERE condition;
  
  # MAX()
  SELECT MAX(column_name)
  FROM table_name
  WHERE condition;
  ```

+ `COUNT()`、`AVG()` 和 `SUM()` 函数

  ```sql
  # count函数  -- 该COUNT()函数返回与指定条件匹配的行数
  SELECT COUNT(column_name)
  FROM table_name
  WHERE condition;
  
  # avg函数 -- 该AVG()函数返回数值列的平均值
  SELECT AVG(column_name)
  FROM table_name
  WHERE condition;
  
  # sum函数 -- 该SUM()函数返回数值列的总和
  SELECT SUM(column_name)
  FROM table_name
  WHERE condition;
  
  ## 案例：查找“OrderDetails”表中“Quantity”字段的总和
  SELECT SUM(Quantity)
  FROM OrderDetails;
  ```

+ `LIKE`运算符在子句` WHERE`中用于搜索列中的指定模式

  有两个通配符经常与` LIKE`运算符一起使用

  -  百分号 (%) 表示零个、一个或多个字符
  -  下划线符号 (_) 代表一个，单个字符

  ```sql
  SELECT column1, column2, ...
  FROM table_name
  WHERE columnN LIKE pattern;
  
  # 选择 CustomerName 以“a”开头的所有客户：
  SELECT * FROM Customers
  WHERE CustomerName LIKE 'a%';
  
  # 选择 CustomerName 以“a”结尾的所有客户：
  SELECT * FROM Customers
  WHERE CustomerName LIKE '%a';
  
  # 第二个位置有‘r’的所有用户
  SELECT * FROM Customers
  WHERE CustomerName LIKE '_r%';
  
  # 以‘a'开头，以'o'结尾的所用客户
  SELECT * FROM Customers
  WHERE ContactName LIKE 'a%o';
  ```

+ 使用 `[charlist]` 通配符

  ```sql
  # 选择a - c开头的所有用户
  SELECT * FROM Customers
  WHERE City LIKE '[a-c]%';
  
  # 选择不以 a - c开头的所有用户
  SELECT * FROM Customers
  WHERE City LIKE '[!a-c]%';
  
  # 选择城市以“b”、“s”或“p”开头， 以“b”、“s”或“p”结尾 的所有客户：
  SELECT * FROM Customers
  WHERE City LIKE '[bsp]%[bsp';
  ```

  ![image-20220913171644130](https://sm.nsddd.top//typora/image-20220913171644130.png?mail:3293172751@qq.com)

+ `IN` 运算符 – 允许您在一个子句中指定多个值` WHERE` 

  ```sql
  SELECT column_name(s)
  FROM table_name
  WHERE column_name IN (value1, value2, ...);
  # 或者：
  SELECT column_name(s)
  FROM table_name
  WHERE column_name IN (SELECT STATEMENT);
  
  # 国家在德国，而且 邮政编码 大于 60000 的表
  SELECT * FROM Customers
  WHERE Country IN ('Germany') and PostalCode > 60000;
  
  # 选择与供应商来自同一国家（而且是UK）的所有客户的：
  SELECT * FROM Customers
  WHERE Country IN (SELECT Country FROM Suppliers WHERE Country = "UK");
  ```

  ![image-20220913172516210](https://sm.nsddd.top//typora/image-20220913172516210.png?mail:3293172751@qq.com)

  ![image-20220913173026540](https://sm.nsddd.top//typora/image-20220913173026540.png?mail:3293172751@qq.com)

+ `BETWEEN` 运算符

  + `BETWEEN`运算符选择给定范围内的值。这些值可以是数字、文本或日期。
  + `BETWEEN`运算符是包容性 的：包括开始值和结束值。

  ```sql
  SELECT column_name(s)
  FROM table_name
  WHERE column_name BETWEEN value1 AND value2;
  
  # 选择产品价格不在 10 ~ 20 之间的所用产品
  SELECT * FROM Products
  WHERE Price NOT BETWEEN 10 AND 20;
  
  # 选择价格在 10 到 20  编号 > 50 且不显示 CategoryID 为 1、2 或 3 的产品：
  SELECT * FROM Products
  WHERE Price BETWEEN 10 AND 20
  AND CategoryID NOT IN (1,2,3) AND ProductID > 50;
  ```

  ![image-20220913173717601](https://sm.nsddd.top//typora/image-20220913173717601.png?mail:3293172751@qq.com)

+ 

## END 链接

+ [回到目录](../README.md)
+ [上一节](2.md)
+ [下一节](4.md)
---
+ [**参与贡献❤️💕💕**](https://nsddd.top/archives/contributors))